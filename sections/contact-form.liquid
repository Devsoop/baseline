{{ 'section-contact-form.css' | asset_url | stylesheet_tag }}

{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{%- endstyle -%}

<div class="color-{{ section.settings.color_scheme }} gradient">
  <div class="contact page-width page-width--narrow section-{{ section.id }}-padding">
    {%- if section.settings.heading != blank -%}
      <h2 class="title title-wrapper--no-top-margin inline-richtext {{ section.settings.heading_size }}{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}">
        {{ section.settings.heading }}
      </h2>
    {%- else -%}
      <h2 class="visually-hidden">{{ 'templates.contact.form.title' | t }}</h2>
    {%- endif -%}
    {%- if section.settings.subheading != blank -%}
      <div class="contact__subheading rte{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}">{{ section.settings.subheading }}</div>
    {%- endif -%}
    {%- liquid
      assign contact_form_class = 'isolate'
      if settings.animations_reveal_on_scroll
        assign contact_form_class = 'isolate scroll-trigger animate--slide-in'
      endif
    -%}
    {%- form 'contact', id: 'ContactForm', class: contact_form_class -%}
      {%- if form.posted_successfully? -%}
        <h2 class="form-status form-status-list form__message" tabindex="-1" autofocus>
          {{- 'icon-success.svg' | inline_asset_content -}}
          {{ 'templates.contact.form.post_success' | t }}
        </h2>
      {%- elsif form.errors -%}
        <div class="form__message">
          <h2 class="form-status caption-large text-body" role="alert" tabindex="-1" autofocus>
            {{- 'icon-error.svg' | inline_asset_content -}}
            {{ 'templates.contact.form.error_heading' | t }}
          </h2>
        </div>
        <ul class="form-status-list caption-large" role="list">
          <li>
            <a href="#ContactForm-email" class="link">
              {{ form.errors.translated_fields.email | capitalize }}
              {{ form.errors.messages.email }}
            </a>
          </li>
        </ul>
      {%- endif -%}
      <div class="contact__fields">
        <div class="field">
          <input
            class="field__input"
            autocomplete="name"
            type="text"
            id="ContactForm-name"
            name="contact[{{ 'templates.contact.form.name' | t }}]"
            value="{% if form.name %}{{ form.name }}{% elsif customer %}{{ customer.name }}{% endif %}"
            placeholder="{{ 'templates.contact.form.name' | t }}"
          >
          <label class="field__label" for="ContactForm-name">{{ 'templates.contact.form.name' | t }}</label>
        </div>
        <div class="field field--with-error">
          <input
            autocomplete="email"
            type="email"
            id="ContactForm-email"
            class="field__input"
            name="contact[email]"
            spellcheck="false"
            autocapitalize="off"
            value="{% if form.email %}{{ form.email }}{% elsif customer %}{{ customer.email }}{% endif %}"
            aria-required="true"
            {% if form.errors contains 'email' %}
              aria-invalid="true"
              aria-describedby="ContactForm-email-error"
            {% endif %}
            placeholder="{{ 'templates.contact.form.email' | t }}"
          >
          <label class="field__label" for="ContactForm-email">
            {{- 'templates.contact.form.email' | t }}
            <span aria-hidden="true">*</span></label
          >
          {%- if form.errors contains 'email' -%}
            <small class="contact__field-error" id="ContactForm-email-error">
              <span class="visually-hidden">{{ 'accessibility.error' | t }}</span>
              <span class="form__message">
                <span class="svg-wrapper">
                  {{- 'icon-error.svg' | inline_asset_content -}}
                </span>
                {{- form.errors.translated_fields.email | capitalize }}
                {{ form.errors.messages.email -}}
              </span>
            </small>
          {%- endif -%}
        </div>
      </div>
      <div class="field">
        <textarea
          rows="10"
          id="ContactForm-body"
          class="text-area field__input"
          name="contact[{{ 'templates.contact.form.comment' | t }}]"
          placeholder="{{ 'templates.contact.form.comment' | t }}"
        >
          {{- form.body -}}
        </textarea>
        <label class="form__label field__label" for="ContactForm-body">
          {{- 'templates.contact.form.comment' | t -}}
        </label>
      </div>
      <div class="contact__button">
        <button type="submit" class="button">
          {{ 'templates.contact.form.send' | t }}
        </button>
      </div>
    {%- endform -%}

    {%- if section.settings.show_company_info -%}
      {%- liquid
        assign has_company_info = false
        if section.settings.trading_name != blank
          assign has_company_info = true
        endif
        if section.settings.company_number != blank
          assign has_company_info = true
        endif
        if section.settings.contact_email != blank
          assign has_company_info = true
        endif
        if section.settings.contact_address != blank
          assign has_company_info = true
        endif
      -%}
      {%- if has_company_info -%}
      <div class="contact__company-info contact__company-info--{{ section.id }}">
        {%- if section.settings.or_text != blank -%}
          <div class="contact__company-info-or">
            <span>{{ section.settings.or_text }}</span>
          </div>
        {%- endif -%}
        <div class="contact__company-info-card{% if section.settings.or_text == blank %} contact__company-info-card--standalone{% endif %}">
          {%- if section.settings.trading_name != blank -%}
            <div class="contact__company-info-row">
              <span class="contact__company-info-label">TRADING NAME</span>
              <p class="contact__company-info-value contact__company-info-value--name">{{ section.settings.trading_name }}</p>
            </div>
          {%- endif -%}
          {%- if section.settings.company_number != blank -%}
            <div class="contact__company-info-row">
              <span class="contact__company-info-label">COMPANY NUMBER:</span>
              <span class="contact__company-info-badge">{{ section.settings.company_number }}</span>
            </div>
          {%- endif -%}
          <div class="contact__company-info-contact">
            {%- if section.settings.contact_email != blank -%}
              <div class="contact__company-info-col">
                <span class="contact__company-info-icon contact__company-info-icon--email" aria-hidden="true">
                  <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M1.33203 4L5.94071 6.61131C7.63976 7.574 8.35763 7.574 10.0567 6.61131L14.6654 4" stroke="white" stroke-width="1.4" stroke-linejoin="round"/>
                  <path d="M1.34254 8.98378C1.38612 11.0275 1.40792 12.0493 2.162 12.8063C2.91608 13.5632 3.96558 13.5896 6.06458 13.6423C7.35823 13.6748 8.63916 13.6748 9.93283 13.6423C12.0318 13.5896 13.0813 13.5632 13.8354 12.8063C14.5895 12.0493 14.6113 11.0275 14.6548 8.98378C14.6689 8.32664 14.6689 7.67344 14.6548 7.01631C14.6113 4.97261 14.5895 3.95077 13.8354 3.19381C13.0813 2.43686 12.0318 2.41049 9.93283 2.35775C8.63916 2.32525 7.35823 2.32525 6.06458 2.35775C3.96558 2.41048 2.91608 2.43685 2.162 3.19381C1.40791 3.95076 1.38612 4.97261 1.34254 7.01631C1.32852 7.67344 1.32853 8.32664 1.34254 8.98378Z" stroke="white" stroke-width="1.4" stroke-linejoin="round"/>
                  </svg>
                </span>
                <div>
                  <span class="contact__company-info-label">EMAIL</span>
                  <p class="contact__company-info-value"><a href="mailto:{{ section.settings.contact_email | strip }}">{{ section.settings.contact_email }}</a></p>
                </div>
              </div>
            {%- endif -%}
            {%- if section.settings.contact_address != blank -%}
              <div class="contact__company-info-col">
                <span class="contact__company-info-icon contact__company-info-icon--address" aria-hidden="true">
                  {{- 'icon-map-pin.svg' | inline_asset_content -}}
                </span>
                <div>
                  <span class="contact__company-info-label">ADDRESS</span>
                  <div class="contact__company-info-value contact__company-info-address">{{ section.settings.contact_address}}</div>
                </div>
              </div>
            {%- endif -%}
          </div>
        </div>
      </div>
      {%- endif -%}
    {%- endif -%}
  </div>
</div>

{% schema %}
{
  "name": "t:sections.contact-form.name",
  "tag": "section",
  "class": "section",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "inline_richtext",
      "id": "heading",
      "default": "t:sections.contact-form.settings.title.default",
      "label": "t:sections.contact-form.settings.title.label"
    },
    {
      "type": "select",
      "id": "heading_size",
      "options": [
        {
          "value": "h2",
          "label": "t:sections.all.heading_size.options__1.label"
        },
        {
          "value": "h1",
          "label": "t:sections.all.heading_size.options__2.label"
        },
        {
          "value": "h0",
          "label": "t:sections.all.heading_size.options__3.label"
        },
        {
          "value": "hxl",
          "label": "t:sections.all.heading_size.options__4.label"
        },
        {
          "value": "hxxl",
          "label": "t:sections.all.heading_size.options__5.label"
        }
      ],
      "default": "h1",
      "label": "t:sections.all.heading_size.label"
    },
    {
      "type": "inline_richtext",
      "id": "subheading",
      "label": "Subheading"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.all.colors.label",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "Company information"
    },
    {
      "type": "checkbox",
      "id": "show_company_info",
      "label": "Show company information below form",
      "default": false
    },
    {
      "type": "text",
      "id": "or_text",
      "label": "Separator text (e.g. OR)",
      "default": "OR"
    },
    {
      "type": "text",
      "id": "trading_name",
      "label": "Trading name",
      "default": "ZEYT GLOBAL LIMITED"
    },
    {
      "type": "text",
      "id": "company_number",
      "label": "Company number",
      "default": "15795980"
    },
    {
      "type": "text",
      "id": "contact_email",
      "label": "Contact email",
      "default": "hello@usebaseline.co"
    },
    {
      "type": "textarea",
      "id": "contact_address",
      "label": "Contact address",
      "default": "3rd Floor 86-90 Paul Street,\nLondon, England\nUnited Kingdom, EC2A 4NE"
    },
    {
      "type": "header",
      "content": "t:sections.all.padding.section_padding_heading"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top",
      "default": 36
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom",
      "default": 36
    }
  ],
  "presets": [
    {
      "name": "t:sections.contact-form.presets.name"
    }
  ]
}
{% endschema %}
